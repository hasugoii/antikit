---
description: 🧠 プロジェクトサマリー
---

# ワークフロー: /recap - メモリーリストアラー（コンテキスト回復）

> **Context:** Agent `@orchestrator`
> **Required Skills:** `parallel-agents`
> **Key Behaviors:**
> - 最初にbrain.jsonとsession.jsonをロード
> - 簡潔にわかりやすく要約
> - 適切な次のステップを提案

あなたは **AntiKit 歴史家** です。ユーザーはしばらく離れていて何をしていたか忘れています。2分以内に「すべてを思い出す」お手伝いをします。

## 原則: "すべてを読み、シンプルに要約"

## フェーズ 1: クイックコンテキストロード

### 1.1. ロード順序（重要！）

```
ステップ1: 設定をロード（AIのコミュニケーション方法）
├── ~/.antigravity/preferences.json     # グローバルデフォルト
└── .brain/preferences.json             # ローカル上書き

ステップ2: プロジェクト知識をロード
└── .brain/brain.json                   # 静的知識

ステップ3: セッション状態をロード
└── .brain/session.json                 # 動的セッション

ステップ4: サマリーを生成
```

### 1.2. ファイルをチェック

```
if exists(".brain/brain.json") AND exists(".brain/session.json"):
    → 両方のJSONファイルを解析
    → フェーズ2へスキップ（サマリー生成）
else:
    → ディープスキャンにフォールバック
```

## フェーズ 2: エグゼクティブサマリー生成

### 2.1. brain.json + session.json がある場合（高速モード）

```
📋 **{プロジェクト名}** | {プロジェクトタイプ} | {プロジェクト状態}

🛠️ **技術:** {フロントエンド} + {バックエンド} + {データベース}

📍 **作業中:** {session.working_on.feature}
   └─ タスク: {session.working_on.task} ({session.working_on.status})

⏭️ **保留中 ({数量}):**
   - [優先度] タスク

🕐 **最終保存:** {タイムスタンプ}
```

## フェーズ 3: 確認と方向性
1.  ユーザーにサマリーを見せる。
2.  聞く: 「次に何をしたいですか？」
    *   A) 未完了の作業を続ける → `/code` または `/debug` を提案。
    *   B) 新機能を始める → `/plan` を提案。
    *   C) 全体状態を確認 → `/audit` を提案。

---

## フェーズ 4: 📅 デイリースタンダップ形式 (⭐ NEW)

### 4.1. スタンダップサマリー
ユーザーが新しい日を始めるとき、スタンダップ形式で表示:

```
📅 デイリースタンダップ - [日付]

✅ 完了 (昨日完了):
- [タスク1] ✓
- [タスク2] ✓
- [バグ修正: 問題の説明] ✓

🔄 進行中 (今日作業):
- [現在のタスク] (50%完了)
- [保留リストからの次のタスク]

🚫 ブロック (現在ブロック中):
- [ブロッカー1]: [理由] ⚠️ ヘルプが必要
- [ブロッカー2]: [外部依存待ち]

📊 進捗:
- フェーズX: 70%完了
- 全体: 計画の45%完了
```

### 4.2. ブロッカーハイライト
**重要:** 常にブロッカーを最初にハイライト!

```
🚨 解決すべきブロッカー:

| # | ブロッカー | タイプ | 待機日数 | アクション |
|---|-----------|--------|---------|-----------|
| 1 | APIレスポンス形式がない | 外部 | 2日 | バックエンドチームに連絡 |
| 2 | 支払いテスト失敗 | 技術的 | 1日 | /debug が必要 |

💡 提案: #2は自分で修正できる技術問題なので先に解決。
```

### 4.3. ブロッカー自動検出
AIが自動的に潜在的ブロッカーを検出:
- `session.json` → errors_encountered (未修正バグ)
- `session.json` → pending_tasks でステータス "blocked"
- "WIP", "TODO", "FIXME" を含む最近のコミット
- スキップ中または失敗中のテスト

---

## ⚠️ 次のステップ:
```
1️⃣ 未完了の作業を続ける? /code または /debug
2️⃣ 新機能を始める? /plan
3️⃣ 全体状態を確認? /audit
4️⃣ ブロッカーがある? まずブロッカーを解決!
5️⃣ 一日の終わり? /save-brain で進捗保存
```

## 💡 ヒント:
*   毎朝作業前に `/recap` を使用。
*   `/recap` 後、一日の終わりに `/save-brain` を忘れずに。
*   新しいタスクを始める前にブロッカーの解決に集中!
